<%
	if (value != null) {
		var groups = [];

		$.each(objectMetadata.fieldDescriptors, function(index, field){
			if(mw3.isHidden(fields[field.name]) || field.name == 'metaworksContext'){
				return true;
			}

			var group = field.attributes ? field.attributes.group : null;

			if(group == undefined){
				group = "undefined";
			}

			if(groups.indexOf(group) == -1){
				groups.push(group);
			}

			if(groups[group] == undefined){
				groups[group] = [];
				groups[group].push(field);
			}else{
				groups[group].push(field);
			}
		});
		var showTitle = !(objectMetadata.faceOptions && objectMetadata.faceOptions['hideTitle']);
		var showViewBox = !(objectMetadata.faceOptions && objectMetadata.faceOptions['hideViewBox']);
		var showNewBtn = !(objectMetadata.faceOptions && objectMetadata.faceOptions['hideNewBtn']);
       	var showLabel = !(objectMetadata.faceOptions && objectMetadata.faceOptions['hideLabels']);
      	var showEditBtn = !(objectMetadata.faceOptions && objectMetadata.faceOptions['hideEditBtn']);
		
  if(showViewBox){
%>
	<div class="view_box3" style="background:#fff;">
		<div class="guide">
			<span class="tl"></span>
			<span class="tr"></span>
		</div>
<%  
  }
%>
		<div class="cont" style="padding-bottom:3px;">
<%
  if(showTitle){
  
  			var objectName;
  			
  			if(value.__toString != null){
				objectName = value.__toString();
			}		
			if(!objectName){
				objectName = objectMetadata.displayName;
			}
  
  
%>		
			<p class="title"><%=mw3.localize(objectName)%></p>
<%
  }
%>				
			<table width="100%" border="0" cellspacing="0" cellpadding="0">


			<% for (var i=0; i<objectMetadata.fieldDescriptors.length; i++){

				var fd = objectMetadata.fieldDescriptors[i];

				if(mw3.isHidden(fields[fd.name])) continue;
				if(fd.name == 'metaworksContext') continue;

				var fieldValue = value[fd.name];
		%>

				<tr><td>
					<div class="form-group">
						<% if(fd.attributes && fd.attributes['imagepath']){
								if(fieldValue){ %>
									<img src="<%=fieldValue%>" width=100>
								<% }
							}else{ %>
								<label class="form-label">
									<strong><%=fd.displayName%></strong>
									<span  class="ui-state-default ui-corner-all"  onClick="mw3.getFaceHelper('<%=objectId%>').toggleChild(this)" style="<%=fd.className.match('^org.uengine.essencia.model')?'':'display:none;'%>">â–¼</span>
								</label>
						<% } %>

						<%	if(fd.attributes && fd.attributes['imagepath']){
							if(fieldValue){ %> <img src="<%=fieldValue%>" width=100> <% }
						}else{ %>
							<div class="controls" style="<%=fd.className.match('^org.uengine.essencia.model')?'display:none;':''%>">
								<%=fields[fd.name].here()%>
							</div>
						<% } %>
					</div>
				</td></tr>
			<%
				}
			%>
			</table>

   <% if(objectMetadata.serviceMethodContexts)
   for(var i=0; i<objectMetadata.serviceMethodContexts.length; i++){
   	   		var serviceMethod = objectMetadata.serviceMethodContexts[i];
   	   		   	   		
   	   		if(serviceMethod.inContextMenu)
   	   			continue;
%><%=methods[serviceMethod.methodName].here()%> <%   
   }
   
   if(mw3.when != mw3.WHEN_EDIT && showEditBtn){  
%>
<!-- <input type=button onclick="<%=editFunction%>" value="Edit"> -->

<%}%>
			    </td>
			    </tr>
			</tbody></table>
			
			
		</div>
<%
  if(showViewBox){
%>	
		<div class="guide">
			<span class="lb"></span>
			<span class="rb"></span>
		</div>
	</div>
<%
  }
%>
<%}else if(showNewBtn){%>
<%}%>
